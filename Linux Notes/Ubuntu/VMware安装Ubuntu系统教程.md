# VMware安装Ubuntu系统保姆级教程

准备工作：
1. 下载 [Ubuntu 镜像文件](https://mirrors.pku.edu.cn/ubuntu-releases)
2. 下载 [VMware 虚拟机软件](https://softwareupdate.vmware.com/cds/vmw-desktop/ws/)


## 配置 VMware
1. 打开 VMware，点击创建新的虚拟机选择自定义  
![vud1](https://github.com/user-attachments/assets/493555c7-ae8c-40f1-ab19-d3a503dba894)  

2. 硬件兼容性选择最新的，点击【下一步】  
![vud2](https://github.com/user-attachments/assets/9e6b1d3f-8afd-4b36-a786-54383071737f)

3. 选择稍后安装操作系统，点击【下一步】  
![vud3](https://github.com/user-attachments/assets/005ce6c1-70fb-488b-bb72-7015ca251af3)

4. 选择操作系统类型为【Linux】版本为【Ubuntu 64位】，点击【下一步】  
![vud4](https://github.com/user-attachments/assets/cd1d2863-afe9-4d58-8516-c0bc7d51a7f3)  

5. 安装位置和虚拟机名称自行选择  
![vud5](https://github.com/user-attachments/assets/f58563d1-a80d-4cea-9ccb-c73eefe0ff0e)  

6. 处理器按需配置，点击【下一步】  
![vud6](https://github.com/user-attachments/assets/ddbfaae6-c339-4dbb-87fa-66ab84ec0ae6)  

7. 内存按需配置，建议 2G 以上，点击【下一步】  
![vud7](https://github.com/user-attachments/assets/1a7a6548-8120-4cdc-999a-fbe3157c8242)  

8. 网络类型选择【NAT模式】，点击【下一步】  
![vud8](https://github.com/user-attachments/assets/de125f9a-615e-4b92-be1b-00e662a057b5)  

9. I/O 控制器选择默认的【LSI Logic】，点击【下一步】  
![vud9](https://github.com/user-attachments/assets/bfcb81cf-864e-42d6-b5ce-670f810cabfc)  

10. 磁盘类型选择【SCSI】，点击【下一步】  
![vud10](https://github.com/user-attachments/assets/0a01c0d6-d6ed-4f05-997d-2d8d71372d86)  

【创建新虚拟磁盘】，点击下一步，磁盘大小按需配置，建议 40G 以上，勾选【将虚拟磁盘存为单个文件】点击【下一步】  
![vud11](https://github.com/user-attachments/assets/2eed07fd-4591-40f0-ae6c-cf2094e4dcd0)  
![vud12](https://github.com/user-attachments/assets/85f1cdf8-668e-49cc-b76d-651838c2fe6c)  

点击【下一步】  
![vud13](https://github.com/user-attachments/assets/84089086-54f6-4430-89d7-3eaad3baf27a)  

点击【完成】  
![vud14](https://github.com/user-attachments/assets/6db08cd5-ac89-43e7-91fe-d81ad105aa81)  

11. 点击【编辑虚拟机设置】  
![vud15](https://github.com/user-attachments/assets/5b311379-22e8-48ac-9ab6-e560f80e39b9)  

选择**CD/DVD(SATA)**添加你所下载的Ubuntu iso镜像文件的位置，点击【确定】  
![vud16](https://github.com/user-attachments/assets/27decf56-8a9e-4406-bb96-ed6e03c04377)  


## 安装 Ubuntu 系统
1. 点击开启虚拟机，进入安装界面  
![vud17](https://github.com/user-attachments/assets/eb1ac9f8-98db-4639-80ad-572e5ca8fc06)  

这里需要小等一会等其加载完成  

2. 选择语言【中文(简体)】，点击【安装 Ubuntu】  
![vud18](https://github.com/user-attachments/assets/27b66d66-f917-4185-bd24-bfe354889f59)  

3. 键盘布局设置为Chinese然后【回车】  
![vud19](https://github.com/user-attachments/assets/2828b327-35eb-443e-890c-74d6f59e4f08)  

4. 使用如下的默认配置，这里要按2~3下Tab键然后点击回车  
![vud20](https://github.com/user-attachments/assets/5b921f4c-bb7a-437e-8862-efa0b475b689)  

5. 点击【现在安装】  
![vud21](https://github.com/user-attachments/assets/7c3fd066-6b45-45c3-98b5-87886461aeae)

6. 点击继续  
![vud22](https://github.com/user-attachments/assets/1489eda4-e415-4597-8f66-0e3eccac28a8)  

7. 位置选择`Shanghai`，点击【继续】  
![vud23](https://github.com/user-attachments/assets/454ec81b-50fa-4bdb-9d45-569b82aeaa1e)  

8. 设置账户密码，点击【继续】  
![vud24](https://github.com/user-attachments/assets/30ab382e-393d-4242-8a33-cb10fc255303)  

9. 等待其安装完成  
![vud25](https://github.com/user-attachments/assets/7645c0c3-f8c7-449b-8de3-44fbff2bb230)  

10. 点击【现在重启】  
![vud26](https://github.com/user-attachments/assets/30835968-e579-46d2-9c2a-20e2fc87f087)  

11. 提示按下回车  
![vud27](https://github.com/user-attachments/assets/e564d370-f838-4dea-9f1b-31fda0100ab3)  

12. 点击【跳过】  
![vud28](https://github.com/user-attachments/assets/e1020cd5-4533-48a3-ae9c-1fb7badb340a)  

13. 点击【前进】  
![vud29](https://github.com/user-attachments/assets/7fd4db03-5ec4-4a12-ba5c-1fbd776e5d5f)  

14. 可以自行选择，点击【前进】  
![vud30](https://github.com/user-attachments/assets/48ef9ca9-4769-4627-8d30-e61fe0b98829)  

15. 点击【前进】  
![vud31](https://github.com/user-attachments/assets/e1a71463-f8f7-41d2-8881-f5a01a11efd8)  

16. 点击【完成】  
![vud32](https://github.com/user-attachments/assets/072e4b7d-9555-411a-8f8b-c8a6ae2d6618)  

17. 这里需要重新安装一下**VMware Tools**但是这里并没有显示所以需要重启一下系统  
![vud33](https://github.com/user-attachments/assets/9143ae7b-574b-42e0-9310-f6481501ba1b)  

18. 重启系统  
![vud34](https://github.com/user-attachments/assets/e17c7af9-a7d5-47e5-bfdb-5a3f3023736a)  
![vud35](https://github.com/user-attachments/assets/8ae1fd17-fa5d-4cc3-b7cf-00b6307a1eb4)  
![vud36](https://github.com/user-attachments/assets/0716b766-9c54-4883-868e-4cdefdd0547b)  

19. 重启后点击**重新安装VMware Tools**这里点击【是】  
![vud37](https://github.com/user-attachments/assets/b91a00b7-9d3e-431a-b96a-49178db221d6)  
![vud38](https://github.com/user-attachments/assets/531cbe6c-ba17-4db7-85c8-bfd13448d2bb)  

20. 双击桌面上的文件夹进入  
![vud39](https://github.com/user-attachments/assets/b46f989b-d5be-46cc-8920-1e7caf4f5a58)  

21. 找到**VMwareTools-x-x.tar.gz**右键选择【用归档管理器打开】  
![vud40](https://github.com/user-attachments/assets/09a7f305-0f4f-4c01-b221-b27bb029d81c)  

22. 右键，【提取】  
![vud41](https://github.com/user-attachments/assets/f72ab525-d518-4ff1-9eb6-5f85b7ce2ccf)  

23. 我这里提取到了桌面  
![vud42](https://github.com/user-attachments/assets/e32334fe-3f84-4863-9bf8-677435a26958)  

提取完成点击关闭  
![vud43](https://github.com/user-attachments/assets/8a9103ad-418a-4190-925f-dabc7d24b403)  

24. 右键提取出的文件夹，点击【在终端中打开】  
![vud44](https://github.com/user-attachments/assets/dd0e697e-32fc-4652-9cf7-f291481c09d5)  

25. 手动输入以下命令，在输入yes之后全部点击回车  
```bash
sudo ./vmware-install.pl
```
![vud45](https://github.com/user-attachments/assets/210dfe3b-6e59-4223-ac39-375f135a5dfb)  

输入密码  
然后输入yes  
之后点击回车  
安装完成  
![vud46](https://github.com/user-attachments/assets/5163b0aa-67d9-4009-9a14-1e61ca0db82f)  

安装完成后需要**重启才能生效**  
```bash
reboot
```

26. 重启后需要安装`open-vm-tools-desktop`才能**实现物理机与虚拟机之间的交互**  
内容参考自：https://www.cnblogs.com/wutou/p/17629408.html  
open-vm-tools-desktop 和 VMware-tools 区别：  
- open-vm-tools-desktop 是 ubuntu 系统提供的开源工具。
- VMware-tools 是 VM 虚拟机官方提供的工具。  
经测试，两者使用区别：  
- open-vm-tools-desktop：安装后，拖拽、复制、粘贴 都可以正常使用，但 共享文件夹 不行。
- VMware-tools：安装后，共享文件夹可以正常使用，但是 拖拽、复制、粘贴 又不行。 
如何让虚拟机，又能 拖拽、复制、粘贴、还可以 共享文件夹？解决方法：open-vm-tools-desktop 和 VMware-tools 都装上  

手动输入以下命令：  
```bash
sudo apt-get install open-vm-tools-desktop
```
![vud47](https://github.com/user-attachments/assets/72e34527-3d85-4e69-83e7-9ef31ce0f24d)  

回车后输入y  
然后一直回车  
安装完成  
![vud48](https://github.com/user-attachments/assets/51f4c50b-78b0-4535-bc88-201b644b15c4)  

安装完成后需要**重启才能生效**  
```bash
reboot
```

可以自行测试是否可以实现物理机与虚拟机之间的复制粘贴的交互行为  
![vud49](https://github.com/user-attachments/assets/259a2543-602d-4e8d-ba19-366ed42faa73)  

卸载VMware-tools命令：  
1. 卸载官方的 tools 工具：
```bash
sudo vmware-uninstall-tools.pl
```
2. 卸载 ubuntu 开源的 tools 工具：
```bash
sudo apt-get remove open-vm-tools
sudo apt-get remove --auto-remove open-vm-tools
sudo apt-get purge open-vm-tools
sudo apt-get purge --auto-remove open-vm-tools
```

### 系统安装后必装的工具：  
安装文本编辑器：
```bash
apt install vim
```
安装ssh远程连接服务：
```bash
apt install ssh
```

### 进阶操作
- 使用root用户实现登陆与ssh远程登陆
请参考下面的文章：  
[Ubuntu使用root用户登录系统](https://github.com/stu2116Edward/Public-study-notes/blob/main/Linux%20Notes/Ubuntu/Ubuntu%E4%BD%BF%E7%94%A8root%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F.md)  
[Linux开启ssh并允许root登录](https://github.com/stu2116Edward/Public-study-notes/blob/main/Linux%20Notes/Linux%E5%BC%80%E5%90%AFssh%E5%B9%B6%E5%85%81%E8%AE%B8root%E7%99%BB%E5%BD%95.md)  

- 关闭Ubuntu20.04使用过程中总是弹出检测到系统程序出现问题的弹窗提示  
![cxwt1](https://github.com/user-attachments/assets/dec2392f-f8c6-468b-98ba-31ec3d61d3a9)

**方法一**：  
在终端输入以下指令：
```
sudo rm /var/crash/*
```
这个操作会删除所有在`/var/crash`目录下的所有内容。这样你就不会再被这些报告以前程序错误的弹窗所扰。但是如果又有一个程序崩溃了，你就会再次看到“检测到系统程序错误”的错误。你可以再次删除这些报告文件  
![cxwt2](https://github.com/user-attachments/assets/21e52de9-c847-48fd-a7e3-5e45284f28c8)  

**方法二**：  
或者你可以选择彻底地摆脱Ubuntu中的系统错误弹窗，要禁止Apport，并且彻底地摆脱Ubuntu系统中的程序崩溃报告，打开一个终端，输入以下命令：
```bash
gedit /etc/default/apport
```
![cxwt3](https://github.com/user-attachments/assets/c834a55e-cedb-4e3c-a8b8-40273c4c2e15)  
把文件最后一行的`把enabled=1改为enabled=0`保存并关闭文件。完成之后你就再也不会看到弹窗报告错误了。如果我们想重新开启错误报告功能，只要再打开这个文件，把enabled设置为1就可以了。  


- 禁止/开启Ubuntu自动更新升级  
**使用图形化的界面**：  
![ugx1](https://github.com/user-attachments/assets/173c5d1e-4724-4b30-95e8-d4c3073bd00a)
一般情况下不建议安装“提前释放出的更新  
![ugx2](https://github.com/user-attachments/assets/87bdcb80-aa60-414c-a769-d4aec08b8525)

**使用命令行方式**：  
1、打开终端，修改配置文件1，输入：
```bash
sudo gedit /etc/apt/apt.conf.d/10periodic
```
如果要`禁止`自动更新配置文件设为如下：
```
APT::Periodic::Update-Package-Lists "0";
APT::Periodic::Download-Upgradeable-Packages "0";
APT::Periodic::AutocleanInterval "0";
APT::Periodic::Unattended-Upgrade "0";
```
如果要`打开`自动更新配置文件设为如下：
```
APT::Periodic::Update-Package-Lists "2";
APT::Periodic::Download-Upgradeable-Packages "1";
APT::Periodic::AutocleanInterval "0";
APT::Periodic::Unattended-Upgrade "1";
```
2、修改配置文件2，输入：
```bash
sudo gedit /etc/apt/apt.conf.d/20auto-upgrades
```
如果要`禁止`自动更新配置文件设为如下：
```
APT::Periodic::Update-Package-Lists "0";
APT::Periodic::Download-Upgradeable-Packages "0";
APT::Periodic::AutocleanInterval "0";
APT::Periodic::Unattended-Upgrade "0";
```
如果要`打开`自动更新配置文件设为如下：
```
APT::Periodic::Update-Package-Lists "2";
APT::Periodic::Download-Upgradeable-Packages "1";
APT::Periodic::AutocleanInterval "0";
APT::Periodic::Unattended-Upgrade "1";
```
保存退出  
两个文件都要修改，直接修改配置文件可能需要重启  
输入：
```bash
reboot
```
