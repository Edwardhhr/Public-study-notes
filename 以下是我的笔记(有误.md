以下是我的笔记(有误请纠错)：

> 基础理论：

PPP：广域网协议 	Sarial（串口）

PPPOE:以太网协议 	用RJ45的均为以太网

初识Cisco(CLI面板信息)：

超级终端：Terminal

用户模式：>

特权模式：#

配置模式：config#

接口模式：config-if#

> 快捷键以及基础命令：

直接退到特权模式(#)：Ctrl+z 或者在命令行中输入end命令.

在终端内加速时间：Ctrl+Shift+6

用于查看当前视图中的命令及解释：？

进入特权模式：enable

显示当前目录：dir

用于显示某个命令执行的信息：show <属性> 注意要在特权模式下

补全当前的命令：Tab

进入配置模式：configure terminal或者conf t (可以不用打全，但新手推荐打全)

进入某个接口：interface <接口名称> 这里示例：int f0/1 (进入0号板槽的1号接口，这里同样可以不需要打全命令，但新手推荐打全)

对当前的设备重新命名：hostname <设备名>

显示设备的接口状态：show int f0/1

> Telnet远程管理交换机：

这里的是二层交换机

interface vlan 1 (默认的vlan为vlan 1) (进入vlan接口配置模式)

ip address 192.168.100.5 255.255.255.0 (配置远程管理的ip地址以及子网掩码)

exit (退出当前模式)

ip default-gateway 192.168.100.100 (给交换机定义网关，有了网关才能实现远程访问)

no shutdown (开启)

show running-config (在特权模式下查看当前配置信息)

在配置模式中设置进入特权模式的密码：

enable secret <密码>

进入虚拟终端模式并设置密码(这里设置的是telnet的密码)：

line vty 0 4 (0 4表示设置用户个数为5) 或者 line vty 5 15

login

password <密码>

write memory (保存,在特权模式下进行,默认自动保存可以不打，新手推荐了解)

进行远程登陆：

telnet <ip地址> (这里的ip为192.168.100.5，请根据自己的配置来填写)

追踪路由途径：

(tracert命令的最大跳数默认为30跳。这意味着如果数据包在到达目标IP地址之前经过30个路由器，tracert命令将停止追踪。如果要增加最大跳数，可以使用tracert命令的-t参数，后跟所需的最大跳数。)

tracert <ip/域名>

老师爱考：

显示交换机当前在内存配置里的情况(特权模式中进行)：show running-config

显示交换机保存在闪存(flash)中的配置(特权模式中进行)：show startup-config

配置交换机VLAN(将不同端口加入不同的VLAN)

注：建议在所有交换机中都加入你添加的VLAN

配置模式中：conf t

vlan 10

vlan 20

int f0/1

switchport mode access (设置为专属模式)

switchport access vlan 10

int f0/2

switchport access vlan 20 (可以直接配置，默认为专属模式)

交换机1：f0/24 交换机2：f0/24 (两个交换机之间配置trunk可以只在一边配置)

配置为trunk模式(trunk模式允许所有VLAN通过)

int f0/24

switchport mode trunk (配置为trunk)

switchport trunk allowed vlan all (这条可以不输入)

链路聚合(用于提高带宽和冗余性)：

int range f0/1-f0/3 (将交换机的1号到3号口绑定为一个聚合组channel-group)

channel-group 1 mode on (设置聚合模式为on)

这里的数字1代表聚合组的编号。聚合组是将多个物理接口绑定成一个逻辑接口的方式，用于提高带宽和冗余性。每个聚合组都有一个唯一的编号，用于标识这个聚合组。在这个命令中，1表示将这个聚合组的编号设置为1

switchport mode trunk (设置为trunk模式)

Trunk模式用于传输多个VLAN的数据，允许通过一条物理链路传输多个VLAN的数据。

静态路由配置：

注：路由有去有回

直连路由配置：

enable

conf t

int f0/0 (进入端口)

ip address 192.168.1.254 255.255.255.0 (给路由器端口配置ip地址)

no shutdown (开启端口)

删除ip地址：

no ip address

显示路由表：
show ip route

单臂路由：
int f0/0

no shutdown

int f0/0.1

encapsulation dot1q 10 (这里的10代表vlan 10)

这条命令的完整解释：

"encapsulation dot1q"表示使用802.1Q封装。

"10"表示要配置的VLAN编号，这里是VLAN 10。

该命令通常用于以太网接口或子接口的配置模式下，通过将该命令应用于接口，将该接口配置为特定的VLAN。

ip address 192.168.1.254 255.255.255.0

int f0/0.2

encapsulation dot1q 20 (这里的10代表vlan 20)

ip address 192.168.2.254 255.255.255.0

静态路由和默认路由：

静态路由是发布与自己不连的网络

全网默认路由适用于单出口路由(只有一个出口的)

R1:>enable

#conf t

#int f0/0

-if#ip address 192.168.1.1 255.255.255.0

-if#no shutdown

-if#exit

#int f0/1

-if#ip address 192.168.3.1 255.255.255.0

-if#no shutdown

-if#exit

#ip route 0.0.0.0 0.0.0.0 192.168.3.2 (默认路由8个0代表所有网络)

R2:>enable

#conf t

#int f0/0

-if#ip address 192.168.3.2 255.255.255.0

-if#no shutdown

-if#exit

#int f0/1

-if#ip address 192.168.4.1 255.255.255.0

-if#no shutdown

-if#exit

#ip route 192.168.1.0 255.255.255.0 192.168.3.1 (静态路由)

#ip route 192.168.2.1 255.255.255.0 192.168.4.2

目标子网号 | 目标子网掩码 | 下一跳ip或者端口号(例：f0/1)

R3:>enable

#conf t

#int f0/0

-if#ip address 192.168.4.2 255.255.255.0

-if#no shutdown

-if#exit

#int f0/1

-if#ip address 192.168.2.1 255.255.255.0

-if#no shutdown

-if#exit

#ip route 0.0.0.0 0.0.0.0 192.168.4.1 (默认路由8个0代表所有网络)

清除路由命令：(在配置模式下进行)

no ip route <子网号> <子网掩码> <下一跳ip或端口号>

串口加时钟

int serial0/0/0

clock rate 64000

子网汇聚：

ip route 192.168.0.0 255.255.0.0 192.168.5.1 （子网汇聚，这一条相当于下面三条静态）

ip route 192.168.1.0 255.255.255.0 192.168.5.1 （静态）

ip route 192.168.2.0 255.255.255.0 192.168.5.1 （静态）

ip route 192.168.4.0 255.255.255.0 192.168.5.1 （静态）

ip route 0.0.0.0 0.0.0.0 192.168.5.1 （默认）

RIP动态路由配置：

动态路由发布与自己相连的网络

RIP动态路由（仅支持15跳，即15个网段内相互学习）端口号：520，UDP协议，无连接不可靠

工作原理：告诉其他路由器我有什么

理论：RIP路由会形成环路，解决方法：最大16跳、水平分割、路由中毒、毒性转换

启用RIP路由：

Router(config)#router rip

network <于自身相连的网段，例：192.168.1.0>

Router(config-router)#no auto-summary （关闭RIP路由自动汇总，关闭汇总后支持显示子网，作用：防止子网冲突）

Router(config-router)#version 2 （设置RIP版本号1/2）

show ip rip （显示RIP信息）

show ip rip database （显示RIP数据库）

当静态路由和RIP混合在一起使用的时候：

先查看是否汇总

show ip route

然后进入RIP：

route rip

redistribute static （在RIP中重发布静态路由）

三层交换机：

三层交换机具备路由功能，PC连接三层交换机使用直通线

1.交换口（默认的），模式：Access，Trunk

2.路由口 no switchport 后可以配置ip地址

3.SVI交换机虚拟接口，说白了就是VLAN口

三层交换机路由实验：

1.使用端口路由：

int f0/1

no switchport

ip address 192.168.1.254 255.255.255.0

no shutdown

int f0/2

no switchport

ip address 192.168.2.254 255.255.255.0

no shutdown

ip routing （开启交换机路由功能）

注：开启后才能ping通

2.使用VLAN路由：

vlan 10

exit

vlan 20

exit

switchport mode access

switchport access vlan 10

int f0/2

switchport mode access

switchport access vlan 20

int vlan 10

ip address 192.168.1.254 255.255.255.0

int vlan 20

ip address 192.168.2.254 255.255.255.0

注：这里不需要ip routing

三层交换机开启trunk需要封装

int f0/3

switchport trunk encapsulation dot1q

switchport mode trunk

三层交换机配置dhcp:

service dhcp

ip dhcp pool bbb

network 192.168.1.0 255.255.255.0

default-router 192.168.1.1

dns-server 60.191.244.5

ACL（访问控制列表）：

100以下为标准	<1~99> 	（标准ACL只允许控制源地址访问）

扩展ACL	<100~199>	（扩展的ACL可以根据源IP地址、目的IP地址、协议号、和端口号进行过滤，注：只有TCP和UDP协议需指定端口号）

show access-lists		（显示ACL配置情况）

反掩码：子网掩码：255.255.255.0的反掩码就是0.0.0.255	子网掩码：255.255.255.224的反掩码为0.0.0.31	即255-224=31

标准ACL:

启用ACL时默认禁止除自己配置以外的配置：access-list 1 deny any	（默认在结尾表示禁止所有）

所以导致无法ping通，应该启用:access-list 1 permit any

配置标准ACL：

access-list <list number> {permit|deny} address <反掩码>

permit允许 deny不允许								IP

```
使用host不用反掩码（host+IP）

         使用any代表所有人（仅any）
```

no access-list <list number>	（表示禁用编号为xxx的所有ACL配置）

注意：ACL一般应用在路由入口处，配置完ACL后记得在接口处应用

在接口中应用ACL（用于限制IP访问）

int f0/1

ip access-group 1 in/out	（内网用in外网用out）

扩展ACL：

启用ACL时默认禁止除自己配置以外的配置：access-list 1 deny ip any any	（默认在结尾表示禁止所有）

所以导致无法ping通，应该启用:access-list 1 permit ip any any	（需要自己手动添加表示允许所有）

扩展ACL配置：

access-list 100 deny icmp 192.168.1.0 0.0.0.255 host 2.2.2.2

icmp用于ping命令              2.2.2.0 0.0.0.255  （不加host要配反掩码）

access-list 100 permit tcp 192.168.1.0 0.0.0.255 host 2.2.2.2 eq 80	（eq表示等于端口为80或www）

access-list 100 deny tcp  192.168.1.0 0.0.0.255 host 2.2.2.2 eq 21	(21或者ftp)

access-list 100 deny ip 192.168.1.0 0.0.0.255 any	（禁止这个网段的所有服务）

本机								目标

在策略中是按信号和一定的顺序来执行判断的（在策略表中从上到下查找）

从上到下查找对应的策略，只要有一条满足就通过对应的那一条

策略表中结尾默认不允许所有IP通过

生成树协议（最佳路径方式）：

系统默认开启生成树协议

spanning-tree mode pvst

关闭生成树：

no spanning-tree mode pvst

spanning-tree vlan 10-40 priority 0	（设置vlan10-vlan40的优先级）

交换机端口安全：

静态（绑定端口只给一台pc使用）

动态（所有接入这个端口的pc都可以使用）

int <port>

switchport port-security

switchport port-security maximum 2 （设置最大mac连接数为2）

switchport port-security aging time 60 （设置端口老化时间为60分钟）

NAT地址转换(内网转公网)：

静态NAT（一对一）

动态NAT（多对多）

端口多路复用PAT（多对一）

显示NAT端口使用状态：show ip nat ?	(有动态和静态的可选)

1.静态配置

在内部局部和内部全局地址之间建立一对一的转换

ip nat inside source static tcp <内网IP> <port> <公网IP> <port>

删除就在前面加个no

最后在接口上应用：

int f0/0

ip nat inside

int f0/1

ip nat outside

2.动态配置

access-list 1 permit 192.168.0.0 0.0.0.255

ip nat pool zzz 20.0.0.1 20.0.0.1 netmask 255.255.255.0	(这里只使用了一个公网ip所以需要多路复用)

ip nat inside source list 1 pool zzz overload	（overload表示开启多路复用）

最后在接口上应用！

动态NAPT:

access-list 1 permit 192.168.1.0 0.0.0.255

ip nat inside source list 1 int f0/1 overload

内网静态路由重发布（让内网学习出口路由）：

route rip

redistibute static

链路聚合和trunk:

先做链路聚合再做trunk

二层交换机：
int range f0/1-f0/2	（进入接口组模式）

channel-group 1 mode on	（建立聚合链路）

exit

int port-channel 1	（进入聚合链路1）

switchport mode trunk

switchport trunk allowed vlan all	（可以不打）

三层交换机：

int range f0/1-f0/2

channel-group 1 mode on

exit

int port-channel 1

switchport trunk encapsulation dot1q	（三层交换机trunk要做封装）

switchport mode trunk

switchport trunk allowed vlan all（可以不打）

OSPF路由：

router ospf <进程号>

network <本地网络IP地址> <本地网络子网掩码> area <区域号>

例子：

route ospf 1	（1表示进程号）

network 192.168.12.0 0.0.0.255 area 0	（0表示区域号）

不同进程要用重发布 redistribute ospf 2 subnets

ospf和rip之间的路由重发：

ospf中配置：route ospf 1

redistribute rip  subnets

rip中配置：route rip

redistribute ospf 1

理论部分补充：

CSMA/CD：载波侦听

数据通常是在两个站（点对点）之间进行传输，按照数据流的方向可分为三种传输模式：单工、半双工、全双工。

单工通信只支持信号在一个方向上传输（正向或反向），任何时候不能改变信号的传输方向。

半双工通信允许信号在两个方向上传输，但某一时刻只允许信号在一个信道上单向传输。

全双工通信允许数据同时在两个方向上传输，即有两个信道，因此允许同时进行双向传输。

参考与CSDN

一个集线器就是一个冲突域，一个vlan也是一个冲突域，没有配置vlan的交换机整个就是一个冲突域。一个交换机就是一个广播域，如何隔离广播域：使用路由和VLAN进行隔离

参考与CSDN

解释以及备注：

默认路由：网络中存在一个或多个默认的网关，并且你希望将所有未知目标IP地址流量发送到默认网关时，可以使用默认路由。

静态路由：手动指定每个目标网络的路由。

动态路由：网络规模庞大、复杂需要自适应、自动学习网络拓扑变化时可以使用动态路由，动态路由可以自动跟新并选择最佳路径。

两台交换机之间使用trunk,需要建立相同的VLAN （通过二层交换实现通信）

三层交换机之间使用路由口进行通信，不同VLAN之间可以相互通信	（通过路由功能）



